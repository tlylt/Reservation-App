(this["webpackJsonpreservation-app"]=this["webpackJsonpreservation-app"]||[]).push([[0],{23:function(e,t,a){e.exports=a(42)},29:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(21),l=a.n(s),o=(a(28),a(29),a(3)),c=a(4),i=a(6),m=a(5),u=a(7),d=a(8),h=a(14),p=a.n(h);a(37),a(40);p.a.initializeApp({apiKey:"AIzaSyBLyaLaT8fbNXoSb_MIgL9MEglKu6SUhoI",authDomain:"reservation-app-e9376.firebaseapp.com",databaseURL:"https://reservation-app-e9376.firebaseio.com",projectId:"reservation-app-e9376",storageBucket:"reservation-app-e9376.appspot.com",messagingSenderId:"1089395231766",appId:"1:1089395231766:web:53f971b387d2ebb0daf937"});new p.a.auth.GoogleAuthProvider,p.a.auth();var v=p.a,b=a(11),g=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userName,a=e.logOutUser;return r.a.createElement("nav",{className:"navbar navbar-expand bg-dark navbar-dark"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement(d.a,{className:"navbar-brand",to:"/"},r.a.createElement(b.a,{className:"mr-2"}),"Reservation App"),r.a.createElement("div",{className:"navbar-nav ml-auto"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{className:"nav-item nav-link",to:"/reservation"},"My Reservation"),r.a.createElement(d.a,{className:"nav-item nav-link",to:"/login",onClick:function(e){return a(e)}},"Log out")):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{className:"nav-item nav-link",to:"/login"},"Login"),r.a.createElement(d.a,{className:"nav-item nav-link",to:"/register"},"Sign up")))))}}]),t}(n.Component),f=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userName,a=e.logOutUser;return r.a.createElement("div",{className:"text-center font-weight-bold mt-2 text-secondary"},t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:""},"Welcome ",t,","," ",r.a.createElement(d.a,{className:"text-secondary",to:"/login",onClick:function(e){return a(e)}},"Log out"))))}}]),t}(n.Component),N=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.userName;return r.a.createElement("div",{className:"container text-center"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-10 col-sm-10 col-lg-8"},r.a.createElement("div",{className:"display-4"},"Make Your Reservation"),r.a.createElement("p",{className:"lead"}," ","This simple app allows people to check available tickets and corporate cards and make reservation. It also allows picking random users to award giveaways."),e?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{className:"btn btn-outline-dark ",to:"/reservation"},"My Reservation")):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{className:"btn btn-outline-dark ",to:"/login"},"Login"),r.a.createElement(d.a,{className:"btn btn-outline-dark ",to:"/register"},"Sign up")))))}}]),t}(n.Component),E=a(10),y=a(9),j=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.errorMessage;return r.a.createElement("div",{className:"col-12 alert alert-danger px-3"},e)}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",errorMessage:null},a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(E.a)({},t,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={email:this.state.email,password:this.state.password};v.auth().signInWithEmailAndPassword(a.email,a.password).then((function(){Object(d.c)("/reservation")})).catch((function(e){e.message?t.setState({errorMessage:e.message}):t.setState({errorMessage:null})}))}},{key:"render",value:function(){return r.a.createElement("form",{className:"mt-3",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-lg-8"},r.a.createElement("div",{className:"card bg-dark text-light"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"mb-3"},"Log in"),r.a.createElement("div",{className:"form-row"},this.state.errorMessage&&r.a.createElement(j,{errorMessage:this.state.errorMessage}),r.a.createElement("section",{className:"col-sm-12 form-group"},r.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"email"},"Email"),r.a.createElement("input",{className:"form-control",type:"email",id:"email",placeholder:"Email",name:"email",value:this.state.email,onChange:this.handleChange,required:!0})),r.a.createElement("section",{className:"col-sm-12 form-group"},r.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"form-control",type:"password",id:"Password",placeholder:"Password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-group col"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-secondary"},"Login")))))))))}}]),t}(n.Component),w=a(12),k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).deleteReservation=function(e,t){e.preventDefault(),v.database().ref("reservations/".concat(a.props.userID,"/").concat(t)).remove()},a.deleteReservation=a.deleteReservation.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.reservations.map((function(t){return r.a.createElement("div",{className:"list-group-item d-flex",key:t.reservationID},r.a.createElement("section",{className:"btn-group align-self-center",role:"group"},r.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",title:"Attendees List",onClick:function(){return Object(d.c)("/attendees/".concat(e.props.userID,"/").concat(t.reservationID))}},r.a.createElement(w.a,null)),r.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",title:"Check in",onClick:function(){return Object(d.c)("/checkin/".concat(e.props.userID,"/").concat(t.reservationID))}},r.a.createElement(b.b,null)),r.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",title:"Delete Reservation",onClick:function(a){return e.deleteReservation(a,t.reservationID)}},r.a.createElement(w.d,null))),r.a.createElement("section",{className:"pl-3 text-left align-self-center"},t.reservationName))}));return r.a.createElement("div",null,t)}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={reservationName:""},a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(E.a)({},t,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.addReservation(this.state.reservationName),this.setState({reservationName:""})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container mt-4"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-8 text-center"},r.a.createElement("h1",{className:"font-weight-light"},"Add a Reservation"),r.a.createElement("div",{className:"card bg-light"},r.a.createElement("div",{className:"card-body text-center"},r.a.createElement("form",{className:"form-group",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("input",{type:"text",className:"form-control",name:"reservationName",placeholder:"Reservation name","aria-describedby":"buttonAdd",value:this.state.reservationName,onChange:this.handleChange}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"submit",className:"btn btn-sm btn-secondary",id:"buttonAdd"},r.a.createElement(b.c,null)))))))),r.a.createElement("div",{className:"col-11 col-md-6 text-center"},r.a.createElement("div",{className:"card border-top-0 rounded-0"},this.props.reservations&&this.props.reservations.length?r.a.createElement("div",{className:"card-body py-2"},r.a.createElement("h4",{className:"card-title font-weight-light m-0"},"Your Reservations")):null,this.props.reservations&&r.a.createElement("div",{className:"list-group list-group-flush"},r.a.createElement(k,{reservations:this.props.reservations,userID:this.props.userID}))))))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={userName:"",email:"",password:"",repeatPassword:"",errorMessage:null},a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=this,a=e.target.name,n=e.target.value;this.setState(Object(E.a)({},a,n),(function(){t.state.password!==t.state.repeatPassword?t.setState({errorMessage:"Passwords do not match"}):t.setState({errorMessage:null})}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={userName:this.state.userName,email:this.state.email,password:this.state.password};v.auth().createUserWithEmailAndPassword(a.email,a.password).then((function(){t.props.registerUser(a.userName)})).catch((function(e){e.message?t.setState({errorMessage:e.message}):t.setState({errorMessage:null})}))}},{key:"render",value:function(){return r.a.createElement("form",{className:"mt-3",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-lg-8"},r.a.createElement("div",{className:"card bg-dark text-light"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"mb-3"},"Sign up"),r.a.createElement("div",{className:"form-row"},this.state.errorMessage&&r.a.createElement(j,{errorMessage:this.state.errorMessage}),r.a.createElement("section",{className:"col-sm-12 form-group"},r.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"userName"},"User Name"),r.a.createElement("input",{className:"form-control",type:"text",id:"userName",placeholder:"User Name",name:"userName",value:this.state.userName,onChange:this.handleChange,required:!0})),r.a.createElement("section",{className:"col-sm-12 form-group"},r.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"email"},"Email"),r.a.createElement("input",{className:"form-control",type:"email",id:"email",placeholder:"Email",name:"email",value:this.state.email,onChange:this.handleChange,required:!0})),r.a.createElement("section",{className:"col-sm-6 form-group"},r.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"form-control",type:"password",id:"Password",placeholder:"Password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0})),r.a.createElement("section",{className:"col-sm-6 form-group"},r.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"repeatPassword"},"Repeat Password"),r.a.createElement("input",{className:"form-control",type:"password",id:"displayName",placeholder:"Repeat Password",name:"repeatPassword",value:this.state.repeatPassword,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-secondary"},"Register")))))))))}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={userName:"",email:""},a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(E.a)({},t,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),v.database().ref("reservations/".concat(this.props.userID,"/").concat(this.props.reservationID,"/attendees")).push({attendeeName:this.state.userName,attendeeEmail:this.state.email,star:!1}),Object(d.c)("/attendees/".concat(this.props.userID,"/").concat(this.props.reservationID))}},{key:"render",value:function(){return r.a.createElement("form",{className:"mt-3",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("div",{className:"card bg-light"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"font-weight-light mb-3"},"Check in"),r.a.createElement("section",{className:"form-group"},r.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"userName"},"Name"),r.a.createElement("input",{required:!0,className:"form-control",type:"text",id:"userName",name:"userName",placeholder:"Name",value:this.state.userName,onChange:this.handleChange})),r.a.createElement("section",{className:"form-group"},r.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"Email"},"Email"),r.a.createElement("input",{required:!0,className:"form-control",type:"email",id:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group text-right mb-0"},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Check in"))))))))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).deleteAttendee=function(e,t,n){e.preventDefault();var r=a.props.adminUser;v.database().ref("reservations/".concat(r,"/").concat(t,"/attendees/").concat(n)).remove()},a.toggleStar=function(e,t,n,r){e.preventDefault();var s=a.props.adminUser,l=v.database().ref("reservations/".concat(s,"/").concat(n,"/attendees/").concat(r,"/star"));void 0===t?l.set(!0):l.set(!t)},a.deleteAttendee=a.deleteAttendee.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.adminUser===this.props.userID,a=this.props.attendees.map((function(a){return r.a.createElement("div",{className:"col-8 col-sm-6 col-md-4 col-lg-3 mb-2 p-0 px-1",key:a.attendeeID},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body px-3 py-2 d-flex align-items-center "+(t?"":"justify-content-center")},t&&r.a.createElement("div",{className:"btn-group pr-2"},r.a.createElement("button",{className:"btn btn-sm "+(a.star?"btn-secondary":"btn-outline-secondary"),title:"Give attendee a star",onClick:function(t){return e.toggleStar(t,a.star,e.props.reservationID,a.attendeeID)}},r.a.createElement(w.c,null)),r.a.createElement("a",{href:"mailto:".concat(a.attendeeEmail),className:"btn btn-sm btn-outline-secondary",title:"Mail Attendee"},r.a.createElement(w.b,null)),r.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",title:"Delete Attendee",onClick:function(t){return e.deleteAttendee(t,e.props.reservationID,a.attendeeID)}},r.a.createElement(w.d,null))),r.a.createElement("div",null,a.attendeeName))))}));return r.a.createElement("div",{className:"row justify-content-center"},a)}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={searchQuery:"",allAttendees:[],displayAttendees:[]},a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.resetQuery=a.resetQuery.bind(Object(y.a)(a)),a.chooseRandom=a.chooseRandom.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.database().ref("reservations/".concat(this.props.userID,"/").concat(this.props.reservationID,"/attendees")).on("value",(function(t){var a=t.val(),n=[];for(var r in a)n.push({attendeeID:r,attendeeName:a[r].attendeeName,attendeeEmail:a[r].attendeeEmail,star:a[r].star});e.setState({allAttendees:n,displayAttendees:n})}))}},{key:"chooseRandom",value:function(){var e=Math.floor(Math.random()*this.state.allAttendees.length);this.resetQuery(),this.setState({displayAttendees:[this.state.allAttendees[e]]})}},{key:"resetQuery",value:function(){this.setState({displayAttendees:this.state.allAttendees,searchQuery:""})}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(E.a)({},t,a))}},{key:"render",value:function(){var e=this,t=this.state.displayAttendees.filter((function(t){return t.attendeeName.toLowerCase().match(e.state.searchQuery.toLowerCase())&&!0}));return r.a.createElement("div",{className:"container mt-4"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h1",{className:"font-weight-light text-center"},"Attendees"),r.a.createElement("div",{className:"card bg-light mb-4"},r.a.createElement("div",{className:"card-body text-center"},r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("input",{type:"text",name:"searchQuery",value:this.state.searchQuery,placeholder:"Search Attendees",className:"form-control",onChange:this.handleChange}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn- btn-sm btn-outline-secondary",title:"Pick a random attendee",onClick:this.chooseRandom},r.a.createElement(b.d,null))),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn- btn-sm btn-outline-secondary",title:"Reset search",onClick:this.resetQuery},r.a.createElement(b.e,null)))))))),r.a.createElement(I,{userID:this.props.userID,reservationID:this.props.reservationID,adminUser:this.props.adminUser,attendees:t}))}}]),t}(n.Component),R=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).registerUser=function(t){v.auth().onAuthStateChanged((function(a){a.updateProfile({displayName:t}).then((function(){e.setState({user:a,userName:a.displayName,userID:a.uid}),Object(d.c)("/reservation")}))}))},e.logOutUser=function(t){t.preventDefault(),e.setState({userName:null,userID:null,user:null}),v.auth().signOut().then((function(){Object(d.c)("/login")}))},e.addReservation=function(t){v.database().ref("reservations/".concat(e.state.user.uid)).push({reservationName:t})},e.state={user:null,userName:null,userID:null,reservations:null,howManyReservations:null},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.auth().onAuthStateChanged((function(t){t?(e.setState({user:t,userName:t.displayName,userID:t.uid}),v.database().ref("reservations/"+t.uid).on("value",(function(t){var a=t.val(),n=[];for(var r in a)n.push({reservationID:r,reservationName:a[r].reservationName});e.setState({reservations:n,howManyReservations:n.length})}))):e.setState({user:null})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(g,{userName:this.state.userName,logOutUser:this.logOutUser}),r.a.createElement(f,{userName:this.state.userName,logOutUser:this.logOutUser}),r.a.createElement(d.b,null,r.a.createElement(N,{path:"/",userName:this.state.userName}),r.a.createElement(O,{path:"/login"}),r.a.createElement(C,{path:"/reservation",addReservation:this.addReservation,reservations:this.state.reservations,userID:this.state.userID}),r.a.createElement(A,{path:"/attendees/:userID/:reservationID",adminUser:this.state.userID}),r.a.createElement(D,{path:"/checkin/:userID/:reservationID"}),r.a.createElement(S,{path:"/register",registerUser:this.registerUser})))}}]),t}(n.Component),M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(R,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Reservation-App",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/Reservation-App","/service-worker.js");M?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):x(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):x(t,e)}))}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.3508755d.chunk.js.map